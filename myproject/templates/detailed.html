{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ medicine.name }} - Medicine Details</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Global Styles */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            color: #333;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 10px 0;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo img {
            height: 50px;
        }

        .search-bar {
            flex: 1;
            margin: 0 20px;
            display: flex;
        }

        .search-bar input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px 0 0 5px;
            font-size: 14px;
            outline: none;
        }

        .search-bar button {
            padding: 10px 20px;
            border: none;
            background-color: #1d2b60;
            color: #fff;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .search-bar button:hover {
            background-color: rgb(20, 52, 168);
        }

        .user-actions a {
            margin-left: 20px;
            font-weight: 500;
            color: #1d2b60;
            transition: color 0.3s;
        }

        .user-actions a:hover {
            color: rgb(20, 52, 168);
        }

        /* Navigation */
        nav {
            background-color: #1d2b60;
            padding: 10px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }

        nav li {
            margin: 0 15px;
        }

        nav a {
            color: #fff;
            font-size: 14px;
            font-weight: 500;
            padding: 10px;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #f0f0f0;
        }

        /* Product Section */
        .product-section {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .image-gallery img {
            width: 300px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .product-info {
            flex-grow: 1;
        }

        .product-info h2 {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .product-info p {
            font-size: 14px;
            color: #666;
            margin: 5px 0;
        }

        .price {
            font-size: 20px;
            font-weight: 600;
            color: #050406;
            margin: 15px 0;
        }

        .buttons {
            margin-top: 20px;
        }

        .buttons button {
            padding: 12px 24px;
            margin-right: 10px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .buttons button:first-child {
            background: #3498db;
            color: white;
        }

        .buttons button:first-child:hover {
            background: #2980b9;
        }

        .buttons button:last-child {
            background: #2ecc71;
            color: white;
        }

        .buttons button:last-child:hover {
            background: #27ae60;
        }

        .description {
            margin-top: 20px;
        }

        .description h2 {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .description p {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }

        /* Delivery and Policy Section */
        .delivery-policy {
            margin-top: 20px;
            padding: 15px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .delivery-policy i {
            font-size: 24px;
            color: #32a3c6;
        }

        .delivery-policy p {
            font-size: 14px;
            color: #555;
            margin: 0;
        }

        .delivery-policy p strong {
            color: #2c3e50;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-top: 30px;
        }

        .tab-button {
            padding: 10px 20px;
            cursor: pointer;
            background: #f1f1f1;
            border: none;
            outline: none;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        .tab-button.active {
            background: #32a3c6;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 20px;
            background: #fff;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .tab-content.active {
            display: block;
        }

        /* Similar Products Section */
        .similar-products {
            margin-top: 40px;
            padding: 20px;
            background: linear-gradient(to bottom, rgb(94, 201, 255), #f9f9f9);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .similar-products h2 {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .product-grid {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 20px;
        }

        .product-card {
            background: #fff;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            transition: transform 0.3s;
            min-width: 200px;
            width: 200px;
            display: flex;
            flex-direction: column;
            height: 350px;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-card img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            border-radius: 5px;
            margin: 0 auto;
        }

        .product-card h3 {
            font-size: 16px;
            margin: 10px 0;
            color: #2c3e50;
            flex-grow: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-card .price {
            font-size: 16px;
            color: #e74c3c;
            font-weight: bold;
            margin: 5px 0;
        }

        .product-card .original-price {
            text-decoration: line-through;
            color: #777;
            font-size: 14px;
        }

        .product-card button {
            background-color: #32a3c6;
            color: #fff;
            padding: 8px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
            margin-top: auto;
        }

        .product-card button:hover {
            background-color: #2a8fb0;
        }

        .rating {
            font-size: 16px;
            color: #ff9800;
            margin-bottom: 10px;
        }

        .section-divider {
            border-top: 1px solid #ddd;
            margin: 20px 0;
        }

        /* Footer */
        footer {
            background-color: #fff;
            padding: 20px;
            border-top: 1px solid #ccc;
            margin-top: 40px;
        }

        .footer-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-column h4 {
            margin-bottom: 10px;
            color: #32a3c6;
            font-size: 1.25rem;
        }

        .footer-column ul {
            list-style: none;
            padding: 0;
        }

        .footer-column li {
            margin-bottom: 5px;
        }

        .footer-column a {
            color: #333;
            transition: color 0.3s;
        }

        .footer-column a:hover {
            color: #32a3c6;
        }

        .social-media {
            text-align: center;
            margin-top: 20px;
        }

        .social-media a {
            margin: 0 10px;
            color: #32a3c6;
            font-size: 1.5rem;
            transition: color 0.3s;
        }

        .social-media a:hover {
            color: #2a8da8;
        }

        /* Profile Dropdown */
        .profile-dropdown {
            position: relative;
            display: inline-block;
        }

        .profile-btn {
            background: none;
            border: none;
            font-size: 16px;
            color: #1d2b60;
            cursor: pointer;
            font-weight: 500;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #fff;
            min-width: 150px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            z-index: 1000;
            right: 0;
        }

        .dropdown-content a {
            color: #333;
            padding: 10px 15px;
            display: block;
            text-align: left;
            font-size: 14px;
        }

        .dropdown-content a:hover {
            background-color: #f0f0f0;
        }

        .profile-dropdown:hover .dropdown-content {
            display: block;
        }

        /* Disclaimer */
        .disclaimer {
            padding: 20px;
            background-color: #f1f1f1;
            border-radius: 8px;
        }

        .disclaimer h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .disclaimer p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="top-bar">
            <div class="logo">
                <img src="{% static 'images/logo.png' %}" alt="Pharmacy Logo">
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Search for medicines and health products">
                <button>Search</button>
            </div>
            <div class="user-actions">
                {% if request.user and request.user.id %}
                    <div class="profile-dropdown">
                        <button class="profile-btn">
                            <i class="fas fa-user-circle"></i> 
                            {% if request.user.get_full_name %}
                                {{ request.user.get_full_name }}
                            {% else %}
                                {{ request.user.username }}
                            {% endif %}
                        </button>
                        <div class="dropdown-content">
                            <a href="{% url 'profile' %}">My Profile</a>
                            <a href="{% url 'my_orders' %}">My Orders</a>
                            <a href="{% url 'logout' %}">Logout</a>
                        </div>
                    </div>
                    <a href="{% url 'view_cart' %}" class="cart-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">
                            {% with total_items=request.user.cart.items.count %}
                                {% if total_items > 0 %}
                                    {{ total_items }}
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                {% else %}
                    <a href="{% url 'pharmacy_auth' %}" class="auth-link">
                        <i class="fas fa-user"></i> Sign In
                    </a>
                    <a href="{% url 'view_cart' %}" class="cart-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">
                            {% with total_items=request.session.cart_items|default:0 %}
                                {% if total_items > 0 %}
                                    {{ total_items }}
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="#">Medicine</a></li>
            <li><a href="#">Wellness</a></li>
            <li><a href="#">Lab Tests</a></li>
            <li><a href="#">Beauty</a></li>
            <li><a href="#">Health Corner</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="product-section">
            <div class="image-gallery">
                <img src="{{ medicine.image.url }}" alt="{{ medicine.name }}">
            </div>
            <div class="product-info">
                <h2>{{ medicine.name }} ({{ medicine.dosage }})</h2>
                <div class="rating">
                    5.0 ★★★★★★ (2 Ratings & 2 Reviews)
                </div>
                <p>Brand: {{ medicine.brand.name }}</p>
                <div class="price">₹{{ medicine.price }}</div>
                <p>Save 16%</p>
                <p>Inclusive of all taxes</p>
                <p>This product cannot be returned for a refund or exchange.</p>
                <p>Mkt: {{ medicine.manufacturer }}</p>
                <p>Delivery charges if applicable will be applied at checkout</p>
                <div class="buttons">
                    {% if medicine.stock > 0 %}
                    <form action="{% url 'add_to_cart' medicine.id 'medicine' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="quantity" value="1">
                        <button type="submit" class="btn">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                    </form>
                    {% else %}
                        <button class="btn out-of-stock">Out of Stock</button>
                    {% endif %}      
                </div>      
                <div class="delivery-policy">
                    <i class="fas fa-truck"></i>
                    <p><strong>Delivery:</strong> Standard delivery in 3-5 working days. Express delivery available.</p>
                </div>
                <div class="delivery-policy">
                    <i class="fas fa-ban"></i>
                    <p><strong>No Return/Refund:</strong> This product is non-returnable and non-refundable as per our policy.</p>
                </div>
            </div>
        </div>

        <!-- Tabs Section -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'description')">Description</button>
            <button class="tab-button" onclick="openTab(event, 'key-benefits')">Key Benefits</button>
            <button class="tab-button" onclick="openTab(event, 'how-to-use')">How to Use</button>
            <button class="tab-button" onclick="openTab(event, 'safety-info')">Safety Information</button>
            <button class="tab-button" onclick="openTab(event, 'other-info')">Other Information</button>
        </div>
        <div id="description" class="tab-content active">
            <p>{{ medicine.description }}</p>
        </div>
        <div id="key-benefits" class="tab-content">
            <p>{{ medicine.key_benefits }}</p>
        </div>
        <div id="how-to-use" class="tab-content">
            <p>{{ medicine.how_to_use }}</p>
        </div>
        <div id="safety-info" class="tab-content">
            <p>{{ medicine.safety_information }}</p>
        </div>
        <div id="other-info" class="tab-content">
            <p>{{ medicine.other_information }}</p>
        </div>

        <!-- Similar Products -->
        <div class="similar-products">
            <h2>Similar Products</h2>
            <div class="product-grid">
                {% for similar in similar_medicines %}
                <div class="product-card">
                    <img src="{{ similar.image.url }}" alt="{{ similar.name }}">
                    <h3>{{ similar.name }} ({{ similar.dosage }})</h3>
                    <p class="price">₹{{ similar.price }}</p>
                    <form action="{% url 'add_to_cart' similar.id 'medicine' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="quantity" value="1">
                        <button type="submit" class="add-to-cart">
                            <i class="fas fa-cart-plus"></i> ADD TO CART
                        </button>
                    </form>
                </div>
                {% empty %}
                <p>No similar medicines found.</p>
                {% endfor %}
            </div>
        </div>
        
        <div class="disclaimer">
            <h2>DISCLAIMER</h2>
            <p>The contents of this website are for informational purposes only and not intended to be a substitute for professional medical advice, diagnosis, or treatment. Please seek the advice of a physician or other qualified health provider with any questions you may have regarding a medical condition. Do not disregard professional medical advice or delay in seeking a because of something you have read on this website.</p>
        </div>
    </div>
    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <div class="footer-column">
                <h4>Company</h4>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Help</h4>
                <ul>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Shipping Policy</a></li>
                    <li><a href="#">Return Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="social-media">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
        </div>
    </footer>

    <script>
        function openTab(event, tabName) {
            var i, tabContent, tabButtons;
            tabContent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabContent.length; i++) {
                tabContent[i].style.display = "none";
            }
            tabButtons = document.getElementsByClassName("tab-button");
            for (i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }
            document.getElementById(tabName).style.display = "block";
            event.currentTarget.classList.add("active");
        }
    </script>
</body>
</html>